appId: com.silviamalavasi.pokedeckbuilder
---
# Maestro E2E test for Full App User Flow (robust, idempotent)
# Handles HomeScreen logic: if no decks/watchlists, shows NewDeck/NewWatchlist, else shows lists

- launchApp
# Home: Decks logic
- assertVisible: "Pok√©Deck Builder"
# If no decks, create one; else, assert deck list
- tapOn:
    text: "New Deck"
    optional: true
- inputText:
    id: "Enter deck name *"
    text: "Test Deck"
    optional: true
- tapOn: "Thumbnail card name (min 3 chars)"
- inputText:
    id: "Thumbnail card name (min 3 chars)"
    text: "Pik"
    optional: true
- waitFor: "Pikachu"
- tapOn:
    text: "Pikachu"
    optional: true
- tapOn:
    text: "Save Deck"
    optional: true
# After creation or if already present, assert deck list and item
- assertVisible: "Test Deck"

# Home: Watchlists logic
# If no watchlists, create one; else, assert watchlist list
- tapOn:
    text: "New Watchlist"
    optional: true
- inputText:
    id: "Watchlist Name"
    text: "Test Watchlist"
    optional: true
- inputText:
    id: "Thumbnail card name (min 3 chars)"
    text: "Eevee"
    optional: true
- tapOn:
    text: "Eevee"
    optional: true
- tapOn:
    text: "Save Watchlist"
    optional: true
# After creation or if already present, assert watchlist list and item
- assertVisible: "Test Watchlist"

# Home: now lists should show the new items
- assertVisible: "Test Deck"
- assertVisible: "Test Watchlist"

# Go to Deck Builder tab and verify deck list
- tapOn: "Deck Builder"
- assertVisible: "Test Deck"
- tapOn: "Test Deck"
- assertVisible: "Deck Details"
# Add a card to the deck
- tapOn: "Add Card"
- tapOn: "Type card name (min 3 chars)"
- inputText:
    id: "Type card name (min 3 chars)"
    text: "Bulb"
- assertVisible: "Bulbasaur"
- tapOn: "Bulbasaur"
- assertVisible: "Set Quantity for Bulbasaur"
- tapOn: "2"
- tapOn: "Set in deck"
- assertVisible: "Bulbasaur"
# Go back to Home
- back
- tapOn: "Home"
# Home: deck and watchlist should be visible in lists
- assertVisible: "Test Deck"
- assertVisible: "Test Watchlist"

# Go to Watchlist tab and verify list
- tapOn: "Watchlist"
- assertVisible: "Test Watchlist"
- tapOn: "Test Watchlist"
- assertVisible: "Watchlist Details"
# Add a card to the watchlist
- tapOn: "Add Card"
- tapOn: "Type card name (min 3 chars)"
- inputText:
    id: "Type card name (min 3 chars)"
    text: "Charm"
- assertVisible: "Charmander"
- tapOn: "Charmander"
- assertVisible: "Charmander"

# Go to Free Search tab
- tapOn: "Free Search"
- inputText:
    id: "Free text"
    text: "Pikachu"
- tapOn: "Search"
- assertVisible: "Search Results"
- tapOn: "CompactCard"
- assertVisible: "FullCard"
- back
- assertVisible: "Search Results"

# Go to Advanced Search tab
- tapOn: "Advanced Search"
- inputText:
    id: "Card name"
    text: "Eevee"
- tapOn: "Search"
- assertVisible: "Search Results"
- tapOn: "CompactCard"
- assertVisible: "FullCard"
- back
- assertVisible: "Search Results"

# End of flow
- tapOn: "Home"
- assertVisible: "Saved Decks"
- assertVisible: "Watchlists"
